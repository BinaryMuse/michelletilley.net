{% extends "base.html" %}

{% block title %}{{ page.title }} | {{ config.title }}{% endblock %}

{% block description %}{{ page.description | default(value=page.summary) | default(value=config.description) | striptags | truncate(length=160) }}{% endblock %}

{% block og_type %}article{% endblock %}

{% block og_title %}{{ page.title }}{% endblock %}

{% block og_description %}{{ page.description | default(value=page.summary) | default(value=config.description) | striptags | truncate(length=200) }}{% endblock %}

{% block twitter_title %}{{ page.title }}{% endblock %}

{% block twitter_description %}{{ page.description | default(value=page.summary) | default(value=config.description) | striptags | truncate(length=200) }}{% endblock %}

{% block og_image %}
{% if page.extra.og_image %}
<meta property="og:image" content="{{ config.base_url }}{{ page.extra.og_image }}" />
{% endif %}
{% endblock %}

{% block twitter_image %}
{% if page.extra.og_image %}
<meta name="twitter:image" content="{{ config.base_url }}{{ page.extra.og_image }}" />
{% endif %}
{% endblock %}

{% block article_meta %}
{% if page.date %}
<meta property="article:published_time" content="{{ page.date }}" />
{% endif %}
{% if page.updated %}
<meta property="article:modified_time" content="{{ page.updated }}" />
{% endif %}
{% if page.taxonomies.categories %}
{% for cat in page.taxonomies.categories %}
<meta property="article:tag" content="{{ cat }}" />
{% endfor %}
{% endif %}
<meta property="article:author" content="{{ config.extra.author }}" />
{% endblock %}

{% block content %}
<article class="post">
  <header class="post-header">
    <h1>{{ page.title }}</h1>
    <time datetime="{{ page.date }}"
      >{{ page.date | date(format="%B %d, %Y") }}</time
    >
    {% if page.taxonomies.categories %}
    <span class="categories">
      {% for cat in page.taxonomies.categories %}
      <a href="/categories/{{ cat | slugify }}">{{ cat }}</a>
      {% endfor %}
    </span>
    {% endif %} {% if page.description %}
    <p style="margin-top: var(--space-sm)">{{ page.description | safe }}</p>
    {% endif %}
  </header>

  <div class="post-content">{{ page.content | safe }}</div>
</article>

<nav class="post-nav">
  {% if page.earlier %}
  <a href="{{ page.earlier.permalink }}" class="prev"
    >&larr; {{ page.earlier.title }}</a
  >
  {% endif %} {% if page.later %}
  <a href="{{ page.later.permalink }}" class="next"
    >{{ page.later.title }} &rarr;</a
  >
  {% endif %}
</nav>
{% endblock %}
